"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[17893],{88015:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>d,toc:()=>l});var i=n(74848),r=n(28453);const t={title:"MLink REST API"},c=void 0,d={id:"Documentation/Products/MLink/RESTAPI",title:"MLink REST API",description:"The MLink REST API is implemented as a standard HTTP/RESTful service accessible at:",source:"@site/docs/Documentation/Products/MLink/RESTAPI.md",sourceDirName:"Documentation/Products/MLink",slug:"/Documentation/Products/MLink/RESTAPI",permalink:"/docs/Documentation/Products/MLink/RESTAPI",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"MLink REST API"},sidebar:"documentationSidebar",previous:{title:"MLink",permalink:"/docs/Documentation/Products/MLink/"},next:{title:"MLink Websocket API",permalink:"/docs/Documentation/Products/MLink/WebSocket"}},o={},l=[{value:"Protocol Usage",id:"protocol-usage",level:3},{value:"REST Commands:",id:"rest-commands",level:3},{value:"Commands:",id:"commands",level:4},{value:"Rest Examples",id:"rest-examples",level:3}];function a(e){const s={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"The MLink REST API is implemented as a standard HTTP/RESTful service accessible at:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Real-time data - ",(0,i.jsx)(s.a,{href:"https://mlink-live.nms.saturn.spiderrockconnect.com/rest/",children:"https://mlink-live.nms.saturn.spiderrockconnect.com/rest/"})]}),"\n",(0,i.jsxs)(s.li,{children:["Delayed data - ",(0,i.jsx)(s.a,{href:"https://mlink-delay.nms.saturn.spiderrockconnect.com/rest/",children:"https://mlink-delay.nms.saturn.spiderrockconnect.com/rest/"})]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Query parameters are URL-encoded and passed in the querystring. If successful, responses are sent back via the HTTP request body section. The URL also determines the protocol."}),"\n",(0,i.jsx)(s.h3,{id:"protocol-usage",children:"Protocol Usage"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"JSON"})," - Standard JSON"]}),"\n",(0,i.jsx)(s.p,{children:"Query:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getmsg&msgtype=OptionNbboQuote&pkey=SPX-NMS-EQT-2024-03-15-4550-C'})}),"\n",(0,i.jsx)(s.p,{children:"Response:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'[\n  {"header":{"mTyp":"OptionNbboQuote"},"message":{"pkey":{"okey":{"at":"EQT","ts":"NMS","tk":"SPX","dt":"2024-03-15","xx":4550,"cp":"Call"}},"updateType":"PrcChange","bidPrice":288.7,"askPrice":292.2,"bidSize":52,"askSize":30,"cumBidSize":52,"cumAskSize":30,"bidExch":"CBOE","askExch":"CBOE","bidMask":4,"askMask":4,"bidTime":31904651,"askTime":31904651,"srcTimestamp":1690379504651660288,"netTimestamp":1690379504651853000}},\n  {"header":{"mTyp":"QueryResult"},"message":{"numMessagesSent":1,"queryElapsed":1.4089,"result":"Ok"}}\n  ]\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Framed JSON"})," - SpiderRock JSON with protobuf-like header. The framing header is a fixed length (14 bytes) and in the form: \\r\\nJMMMMMLLLLLL, where J is the protocol [J = framed json, P = protobuf], MMMMM is the message number (zero padded), and LLLLLL is the message length (zero padded)."]}),"\n",(0,i.jsx)(s.p,{children:"Query:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/jsonf?apikey="your_api_key"&cmd=getmsg&msgtype=OptionNbboQuote&pkey=SPX-NMS-EQT-2024-03-15-4550-C'})}),"\n",(0,i.jsx)(s.p,{children:"Response:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'J02785000423{"header":{"mTyp":"OptionNbboQuote"},"message":{"pkey":{"okey":{"at":"EQT","ts":"NMS","tk":"SPX","dt":"2024-03-15","xx":4550,"cp":"Call"}},"updateType":"PrcChange","bidPrice":289.4,"askPrice":291.9,"bidSize":11,"askSize":62,"cumBidSize":11,"cumAskSize":62,"bidExch":"CBOE","askExch":"CBOE","bidMask":4,"askMask":4,"bidTime":31982946,"askTime":31982592,"srcTimestamp":1690379582946764032,"netTimestamp":1690379582946960400}}\nJ03445000101{"header":{"mTyp":"QueryResult"},"message":{"numMessagesSent":1,"queryElapsed":1.4177,"result":"Ok"}}\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Protobuf"})," - Google's mechanism for serializing structured data, generally more efficient for processing higher bandwidth, lower-latency applications. See compilation notes below for usages. See above Framed JSON for header information."]}),"\n",(0,i.jsx)(s.p,{children:"Query:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/proto?apikey="your_api_key"&cmd=getmsg&msgtype=OptionNbboQuote&pkey=SPX-NMS-EQT-2024-03-15-4550-C'})}),"\n",(0,i.jsx)(s.p,{children:"Response:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-cmd",children:"P02745000499<OptionNbboQuote as protoBuf/binary message>\nP03320000111<QueryResult as protoBuf/binary message>\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Compiling SR proto files"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:".proto"})," files exist in ",(0,i.jsx)(s.a,{href:"/proto_files",children:"SRMlink/proto_files"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"spiderrock_common.proto"}),"\n",(0,i.jsx)(s.li,{children:"All Token .proto files for SpiderRock specific messages"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Both of these files need to be compiled to use ",(0,i.jsx)(s.a,{href:"https://protobuf.dev/overview/",children:"protobuf"})," with MLink."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["To compile, first install the compiler, ",(0,i.jsx)(s.a,{href:"https://github.com/protocolbuffers/protobuf/releases/tag/v22.2",children:"download the package"})," and follow the instructions in the README."]}),"\n",(0,i.jsx)(s.li,{children:"Then, run the compiler, specifying your application's source directory (the current directory is used by default), the destination directory (where you want the generated code to go), and the path to your .proto file."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"For python, using python_out:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-cmd",children:"protoc -I=$SRC_DIR --python_out=$DST_DIR $SRC_DIR/[File].proto\n"})}),"\n",(0,i.jsx)(s.p,{children:"In your specified destination, this will generate N .py files:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"spiderrock_common_pb2.py"}),"\n",(0,i.jsx)(s.li,{children:'"Specific message"_pb2.py'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"rest-commands",children:"REST Commands:"}),"\n",(0,i.jsx)(s.p,{children:"Query parameters are a set of key/value pairs (not case-sensitive):"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Name"}),(0,i.jsx)(s.th,{children:"Parameter"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"cmd"}),(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:'c="command" - the type of command, see list below'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"msgType"}),(0,i.jsx)(s.td,{children:"mt"}),(0,i.jsx)(s.td,{children:'mt="message type" - either the string or numeric label of an SR Data Object class'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"pkey"}),(0,i.jsx)(s.td,{children:"pk"}),(0,i.jsx)(s.td,{children:'pk="primary key" - a string representation of the primary key of a specific SR Data Object instance'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"limit"}),(0,i.jsx)(s.td,{children:"l"}),(0,i.jsx)(s.td,{children:'l="limit" - a number between 1 and 10,000 and acts to limit the number of messages in the response body'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"secret"}),(0,i.jsx)(s.td,{children:"secret"}),(0,i.jsx)(s.td,{children:'secret="secret" - the client-supplied API Password (if any) [only used with getapikey]'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"view"}),(0,i.jsx)(s.td,{children:"v"}),(0,i.jsx)(s.td,{children:'v="view clause" - a string in the form of "field1  field2  field3"'})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"where"}),(0,i.jsx)(s.td,{children:"w"}),(0,i.jsxs)(s.td,{children:['w= "where clause" - a string in the form "field1:eq',":value",'" or "(field1:ne',":value1"," & field1:ne",":value2",")"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"order"}),(0,i.jsx)(s.td,{children:"order"}),(0,i.jsxs)(s.td,{children:['(optional) order clause eg. "(bidsize',":DESC"," | bidexch",":ASC"," | bidprice:DESC",":ABS"," | askprice:ASC",":ABS",'"  (default is unordered; default is faster)']})]})]})]}),"\n",(0,i.jsx)(s.h4,{id:"commands",children:"Commands:"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Command"}),(0,i.jsx)(s.th,{children:"Description"}),(0,i.jsx)(s.th,{children:"Parameters"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"getapikey"}),(0,i.jsx)(s.td,{children:"creates/updates MLink API key"}),(0,i.jsx)(s.td,{children:"secret"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"getmsgtypes"}),(0,i.jsx)(s.td,{children:"returns all available message types"}),(0,i.jsx)(s.td,{children:"view, where"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"getschema"}),(0,i.jsx)(s.td,{children:"returns a single message schema"}),(0,i.jsx)(s.td,{children:"msgType, view"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"getmsg"}),(0,i.jsx)(s.td,{children:"returns a single message by PrimaryKey"}),(0,i.jsx)(s.td,{children:"msgType, pkey, view"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"getmsgs"}),(0,i.jsx)(s.td,{children:"returns all available messages for a message type"}),(0,i.jsx)(s.td,{children:"msgtype, pkey, limit, view, where, order"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"getaggregate"}),(0,i.jsx)(s.td,{children:"returns summarized or aggregated data based on specified criteria"}),(0,i.jsx)(s.td,{children:"msgtype, group, measure"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"getcount"}),(0,i.jsx)(s.td,{children:"returns the count of records for a message type"}),(0,i.jsx)(s.td,{children:"msgType, where"})]})]})]}),"\n",(0,i.jsx)(s.p,{children:'"WHERE" clauses can contain the following comparison symbols:'}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:":gt: is greater than"}),"\n",(0,i.jsx)(s.li,{children:":ge: is greater than or equal to"}),"\n",(0,i.jsx)(s.li,{children:":lt: is less than"}),"\n",(0,i.jsx)(s.li,{children:":le: is less than or equal to"}),"\n",(0,i.jsx)(s.li,{children:":eq: is equal"}),"\n",(0,i.jsx)(s.li,{children:":ne: is not equal"}),"\n",(0,i.jsx)(s.li,{children:"%26 is an AND statement"}),"\n",(0,i.jsx)(s.li,{children:"| is an OR statement"}),"\n",(0,i.jsx)(s.li,{children:":sw: is starts with"}),"\n",(0,i.jsx)(s.li,{children:":ew: is ends with"}),"\n",(0,i.jsx)(s.li,{children:":cv: is contains values"}),"\n",(0,i.jsx)(s.li,{children:":nv: is does not contain value"}),"\n",(0,i.jsx)(s.li,{children:":cb: is contained between (two dates for instance) separated by '$'"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:'"getAggregate" takes in both group and measure with a msgType:'}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Group types can be the following; examples:\nNumeric Quantile: ",(0,i.jsx)(s.code,{children:'{ "cmd", "getaggregate" }, { "msgtype", "OptionNbboQuote" }, { "group", "bidprice:Q:9" }, { "measure", "bidprice" }'})]}),"\n",(0,i.jsxs)(s.p,{children:["Numeric Range: ",(0,i.jsx)(s.code,{children:'{ "cmd", "getaggregate" },{ "msgtype", "OptionNbboQuote" },{ "group", "bidprice:RANGE:3" }, { "measure", "bidprice" }'})]}),"\n",(0,i.jsxs)(s.p,{children:["DateTimeRange: ",(0,i.jsx)(s.code,{children:'{ "cmd", "getaggregate" }, { "msgtype", "OptionPrint" },{ "group", $"timestamp:TIMEHIST:3#STARTDATE#ENDDATE" },{ "measure", "prtprice" }'})]}),"\n",(0,i.jsxs)(s.p,{children:["String Top N: ",(0,i.jsx)(s.code,{children:'{ "cmd", "getaggregate" }, { "msgtype", "OptionNbboQuote" }, { "group", "bidexch:top:3" }, { "measure", "bidprice|askprice|bidsize|asksize" }'})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["You can set measureTypes in group parameters such that:\n",(0,i.jsx)(s.code,{children:'{ "cmd", "getaggregate" }, { "msgtype", "OptionNbboQuote" }, { "group", "bidexch:top:3:asksize:max" }, { "measure", "bidprice|askprice|bidsize|asksize"}'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Note that measureTypes can be of cnt, min, max, sum, avg"}),"\n",(0,i.jsx)(s.h3,{id:"rest-examples",children:"Rest Examples"}),"\n",(0,i.jsx)(s.p,{children:"Obtain your session Key (first needs UserName, PassWord, and MFA):"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?cmd=logon&user=USERNAME&pw=PASSWORD&pin=MFA_CODE"})}),"\n",(0,i.jsx)(s.p,{children:"Get all messages available:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getmsgtypes'})}),"\n",(0,i.jsx)(s.p,{children:"Get field definitions for a message:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getschema&msgtype=OptionNbboQuote'})}),"\n",(0,i.jsx)(s.p,{children:"Filtering for an Option Key:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getmsgs&msgtype=OptionNbboQuote&where=okey:eq:SPX-NMS-EQT-2024-03-15-4550-C'})}),"\n",(0,i.jsx)(s.p,{children:"Filtering for a Ticker Key:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getmsgs&msgtype=StockBookQuote&where=ticker:eq:AAPL-NMS-EQT'})}),"\n",(0,i.jsx)(s.p,{children:"or"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getmsgs&msgtype=OptionNbboQuote&where=okey.tk:eq:AAPL'})}),"\n",(0,i.jsx)(s.p,{children:"Filtering by a View:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getmsgs&msgtype=OptionNbboQuote&view=okey|bidprice|askprice'})}),"\n",(0,i.jsx)(s.p,{children:"Complex filtering:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getmsgs&msgtype=OptionNbboQuote&where=(bidsize:eq:1%26asksize:eq:1)|(bidsize:eq:10%26asksize:eq:1)&view=okey|bidprice|askprice|asksize|bidsize'})}),"\n",(0,i.jsx)(s.p,{children:"Complex Primary Keys:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getmsg&msgtype=LiveSurfaceCurve&pkey=AAPL-NMS-EQT-2023-12-01|Live'})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Note that in this example the pkey is a repeater with en Expiry Key + SurfaceType"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Simple getAggregate:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getaggregate&msgtype=OptionNbboQuote&measure=bidprice|askprice|bidsize|asksize'})}),"\n",(0,i.jsx)(s.p,{children:"GetAggregate by Bid Exchange:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getaggregate&msgtype=OptionNbboQuote&group=bidexch&measure=bidprice|askprice|bidsize|asksize'})}),"\n",(0,i.jsx)(s.p,{children:"GetAggregate by Bid Exchange Top3:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getaggregate&msgtype=OptionNbboQuote&group=bidexch:top:3&measure=bidprice|askprice|bidsize|asksize'})}),"\n",(0,i.jsx)(s.p,{children:"GetAggregate by bidPrice Range:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getaggregate&msgtype=OptionNbboQuote&group=bidprice:RANGE:3&measure=bidprice'})}),"\n",(0,i.jsx)(s.p,{children:"GetAggregate complex:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:'https://mlink-live.nms.saturn.spiderrockconnect.com/rest/json?apikey="your_api_key_token"&cmd=getaggregate&msgtype=OptionPrint&group=timestamp:TRANGE:3&measure=prtsize&where=timestamp:cb:value1$value2'})})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>d});var i=n(96540);const r={},t=i.createContext(r);function c(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);